<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="darksimplicity">
  <meta name="generator" content="Hugo 0.20.2" />
  
  
  <base href="https://jeqo.github.io/">
  <title>Oracle BPM 12c sobre AWS EC2 usando Vagrant y Chef</title>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.020/css/hack-extended.min.css">
  <link rel="stylesheet" href="/css/style.min.css">  
  <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
</head>
<body>
  <div class="wrap">
    <div class="navbar">
        <ul class="navbar-list" style="float:right">
          <li class="navbar-item">
              <a class="navbar-link" href="https://jeqo.github.io/es/post/">Blog</a>
          </li><li class="navbar-item">
              <a class="navbar-link" href="https://jeqo.github.io/es/talk/">Presentaciones</a>
          </li><li class="navbar-item">
              <a class="navbar-link" href="https://jeqo.github.io/es/note/">Notas</a>
          </li><li class="navbar-item">
              <a class="navbar-link" href="https://jeqo.github.io/es/about/">Acerca de</a>
          </li>
          
          <li class="navbar-item"><a class="navbar-link">|</a></li>
          
          <li class="navbar-item"><a class="navbar-link" href="https://jeqo.github.io/post/2014-12-11-run-bpm-12c-aws/">en</a></li>
          
        </ul>
        
    </div>
    <div class="header">
      <span style="font-size: 34px;">
        <a href="https://jeqo.github.io/">@jeqo</a>
      </span>
      <span style="font-size:12px;">&nbsp;&nbsp;|&nbsp;&nbsp;<i>back-end, integration, devops, etc.</i> </span>
    </div>

<div class="empty">&nbsp;</div>
  <div class="post-title">
    <a class="post-title-link" href="https://jeqo.github.io/es/post/2014-12-11-run-bpm-12c-aws/">Oracle BPM 12c sobre AWS EC2 usando Vagrant y Chef</a>
  </div>
      <div class="tags">tags:</br>
        <a class="tag-link" href="/es/tags/oracle">oracle </a><a class="tag-link" href="/es/tags/fmw">fmw </a><a class="tag-link" href="/es/tags/bpm">bpm </a><a class="tag-link" href="/es/tags/chef">chef </a><a class="tag-link" href="/es/tags/vagrant">vagrant </a>
    </div>
    <div class="content-full">

<p>En esta entrada mostraré el procedimiento que utilicé para crear
instancias en Amazon Web Service EC2, con Oracle BPM 12c instalado y
un dominio provisionado.</p>

<p>Este procedimiento se realizo en los siguientes pasos:</p>

<ul>
<li>Crear una instancia en AWS EC2 (con Vagrant)</li>
<li>Conectarse a una instancia NFS para obtener instaladores (con Chef)</li>
<li>Instalar Oracle BPM 12c Quickstart y crear Dominio (con Chef)</li>
</ul>

<p>GitHub: <a href="https://github.com/jeqo/oracle-bpm-12c-aws">https://github.com/jeqo/oracle-bpm-12c-aws</a></p>

<h2 id="crear-una-instancia-en-aws-ec2">Crear una instancia en AWS EC2</h2>

<p>He creado una instancia Red Hat usando Vagrant. Esta instancia debe estar conectada
a una instancia NFS que tiene los instaladores de Oracle (esta fue creada
  en esta <a href="http://jeqo.github.io/blog/devops/create-nfs-instance-aws-es/">entrada</a>).</p>

<p>Esta es la instancia NFS:</p>

<p><img src="images/2014-12-11-run-bpm-12c-aws/2014-12-11_0836.png" alt="Instancia NFS" title="NFS Instance" /></p>

<p>Y el directorio &ldquo;/data&rdquo; esta compartido. Incluye los instaladores de Oracle DB XE 11g y BPM 12c:</p>

<p><img src="images/2014-12-11-run-bpm-12c-aws/2014-12-11_0841.png" alt="Directorios NFS" title="NFS directories" /></p>

<h3 id="configuración-en-vagrant">Configuración en Vagrant</h3>

<p><a href="https://gist.github.com/jeqo/62b74a9ed65d575d91b4">Gist</a></p>

<p>{% gist 62b74a9ed65d575d91b4 Vagrantfile &gt;}}</p>

<p>Ejecutar el siguiente comando:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">vagrant up --provider<span style="color: #333333">=</span>aws
</pre></div>

<h3 id="conectarse-a-la-instancia-nfs">Conectarse a la instancia NFS</h3>

<p>Esta es la primera receta Chef que será ejecutada:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="color: #333333">...</span>
  chef<span style="color: #333333">.</span>add_role <span style="background-color: #fff0f0">&quot;nfs-client&quot;</span>
<span style="color: #333333">...</span>
</pre></div>

<p>Utilizando el rol Chef:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">{
  <span style="color: #007700">&quot;name&quot;</span> : <span style="background-color: #fff0f0">&quot;nfs-client&quot;</span>,
  <span style="color: #007700">&quot;description&quot;</span> : <span style="background-color: #fff0f0">&quot;Role applied to the system that should be an NFS client tools.&quot;</span>,
  <span style="color: #007700">&quot;json_class&quot;</span> : <span style="background-color: #fff0f0">&quot;Chef::Role&quot;</span>,
  <span style="color: #007700">&quot;default_attributes&quot;</span> : {
    <span style="color: #007700">&quot;nfs-client&quot;</span> : {
      <span style="color: #007700">&quot;server-host&quot;</span> : <span style="background-color: #fff0f0">&quot;localhost&quot;</span>,
      <span style="color: #007700">&quot;local-directory&quot;</span> : <span style="background-color: #fff0f0">&quot;/data&quot;</span>,
      <span style="color: #007700">&quot;remote-directory&quot;</span> : <span style="background-color: #fff0f0">&quot;/data&quot;</span>
    }
  },
  <span style="color: #007700">&quot;run_list&quot;</span> : [
    <span style="background-color: #fff0f0">&quot;recipe[nfs-utils::nfs-client]&quot;</span>
  ]
}
</pre></div>

<p>Para actualizar el server-host desde su configuración de Vagrant, agregar las
siguientes líneas:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span style="color: #333333">...</span>
chef<span style="color: #333333">.</span>json <span style="color: #333333">=</span> {
  <span style="background-color: #fff0f0">&quot;nfs-client&quot;</span> <span style="color: #333333">=&gt;</span> {
    <span style="background-color: #fff0f0">&quot;server-host&quot;</span> <span style="color: #333333">=&gt;</span> <span style="background-color: #fff0f0">&quot;123.1.1.12&quot;</span>
  },
  <span style="color: #333333">...</span>
</pre></div>

<p>Y cuando la instancia sea creada, un nuevo directorio &ldquo;/data&rdquo; se sincronizará.</p>

<h2 id="instalación-de-oracle-bpm-12c-quickstart">Instalación de Oracle BPM 12c Quickstart</h2>

<p>Para instalar BPM, se debe utilizar el <a href="https://supermarket.chef.io/cookbooks/oracle-fmw">cookbook &ldquo;oracle-fmw&rdquo;</a>
compartido en Chef Supermarket. Este esta explicador en <a href="http://jeqo.github.io/blog/devops/chef-cookbook-oracle-fmw-12c-es/">esta entrada</a>.</p>

<p>La configuración de Vagrant invoca el provisionamiento con Chef:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%">{
  <span style="color: #007700">&quot;name&quot;</span> : <span style="background-color: #fff0f0">&quot;demo-bpm_bam-12c&quot;</span>,
  <span style="color: #007700">&quot;json_class&quot;</span> : <span style="background-color: #fff0f0">&quot;Chef::Role&quot;</span>,
  <span style="color: #007700">&quot;default_attributes&quot;</span> : {
    <span style="color: #007700">&quot;domain-12c&quot;</span>: {
      <span style="color: #007700">&quot;name&quot;</span>: <span style="background-color: #fff0f0">&quot;demo-bpm_bam-domain&quot;</span>,
      <span style="color: #007700">&quot;mode&quot;</span>: <span style="background-color: #fff0f0">&quot;Compact&quot;</span>,
      <span style="color: #007700">&quot;apps&quot;</span>: [
        {<span style="color: #007700">&quot;name&quot;</span> : <span style="background-color: #fff0f0">&quot;SOA&quot;</span>, <span style="color: #007700">&quot;enabled&quot;</span> : <span style="color: #008800; font-weight: bold">true</span>},
        {<span style="color: #007700">&quot;name&quot;</span> : <span style="background-color: #fff0f0">&quot;BPM&quot;</span>, <span style="color: #007700">&quot;enabled&quot;</span> : <span style="color: #008800; font-weight: bold">true</span>},
        {<span style="color: #007700">&quot;name&quot;</span> : <span style="background-color: #fff0f0">&quot;BAM&quot;</span>, <span style="color: #007700">&quot;enabled&quot;</span> : <span style="color: #008800; font-weight: bold">true</span>},
        {<span style="color: #007700">&quot;name&quot;</span> : <span style="background-color: #fff0f0">&quot;OSB&quot;</span>, <span style="color: #007700">&quot;enabled&quot;</span> : <span style="color: #008800; font-weight: bold">false</span>}
      ],
      <span style="color: #007700">&quot;machines&quot;</span>: [
      ],
      <span style="color: #007700">&quot;admin_server&quot;</span>: {
        <span style="color: #007700">&quot;base_name&quot;</span> : <span style="background-color: #fff0f0">&quot;AdminServer&quot;</span>,
        <span style="color: #007700">&quot;new_name&quot;</span> : <span style="background-color: #fff0f0">&quot;bpm_bpm-server&quot;</span>,
        <span style="color: #007700">&quot;port&quot;</span> : <span style="background-color: #fff0f0">&quot;7001&quot;</span>
      },
      <span style="color: #007700">&quot;managed_servers&quot;</span>: [
      ],
      <span style="color: #007700">&quot;db_repo_host&quot;</span>: <span style="background-color: #fff0f0">&quot;localhost&quot;</span>,
      <span style="color: #007700">&quot;db_repo_port&quot;</span>: <span style="background-color: #fff0f0">&quot;1521&quot;</span>,
      <span style="color: #007700">&quot;db_repo_sid&quot;</span>: <span style="background-color: #fff0f0">&quot;xe&quot;</span>,
      <span style="color: #007700">&quot;db_repo_prefix&quot;</span>: <span style="background-color: #fff0f0">&quot;DEMO&quot;</span>,
      <span style="color: #007700">&quot;db_repo_password&quot;</span>: <span style="background-color: #fff0f0">&quot;welcome1&quot;</span>
    },
    <span style="color: #007700">&quot;rcu-12c&quot;</span>: {
      <span style="color: #007700">&quot;db_schema_prefix&quot;</span>: <span style="background-color: #fff0f0">&quot;DEMO&quot;</span>,
      <span style="color: #007700">&quot;db_dba_user&quot;</span>: <span style="background-color: #fff0f0">&quot;SYS&quot;</span>,
      <span style="color: #007700">&quot;db_dba_role&quot;</span>: <span style="background-color: #fff0f0">&quot;SYSDBA&quot;</span>,
      <span style="color: #007700">&quot;db_dba_password&quot;</span>: <span style="background-color: #fff0f0">&quot;welcome1&quot;</span>,
      <span style="color: #007700">&quot;db_schemas_password&quot;</span>: <span style="background-color: #fff0f0">&quot;welcome1&quot;</span>,
      <span style="color: #007700">&quot;db_hostname&quot;</span>: <span style="background-color: #fff0f0">&quot;localhost&quot;</span>,
      <span style="color: #007700">&quot;db_port&quot;</span>: <span style="background-color: #fff0f0">&quot;1521&quot;</span>,
      <span style="color: #007700">&quot;db_service&quot;</span>: <span style="background-color: #fff0f0">&quot;xe&quot;</span>,
      <span style="color: #007700">&quot;components&quot;</span>: [
        <span style="background-color: #fff0f0">&quot;SOAINFRA&quot;</span>,
        <span style="background-color: #fff0f0">&quot;OPSS&quot;</span>,
        <span style="background-color: #fff0f0">&quot;IAU&quot;</span>,
        <span style="background-color: #fff0f0">&quot;MDS&quot;</span>,
        <span style="background-color: #fff0f0">&quot;WLS&quot;</span>,
        <span style="background-color: #fff0f0">&quot;UCSUMS&quot;</span>,
        <span style="background-color: #fff0f0">&quot;IAU_APPEND&quot;</span>,
        <span style="background-color: #fff0f0">&quot;IAU_VIEWER&quot;</span>
      ]
    }
  },
  <span style="color: #007700">&quot;run_list&quot;</span> : [
    <span style="background-color: #fff0f0">&quot;recipe[oracle-fmw::install-bpm_qs-12c]&quot;</span>,
    <span style="background-color: #fff0f0">&quot;recipe[oracle-fmw::create-rcu_repository-12c]&quot;</span>,
    <span style="background-color: #fff0f0">&quot;recipe[oracle-fmw::create-domain-12c]&quot;</span>
  ]
}
</pre></div>

<p>Incluye la llamada a 3 recetas: &ldquo;install-bpm_qs-12c&rdquo; , &ldquo;create-rcu_repository-12c&rdquo;,
&ldquo;create-domain-12c&rdquo;, incluyendo la información del dominio (&ldquo;domain-12c&rdquo;), y RCU (&ldquo;rcu-12c&rdquo;).</p>

<p>Este proceso toma cerca de 30 min. aprox.</p>

<p>Una vez finalizado, debe poder acceder con el usuario de sistema operativo &ldquo;oracle-fmw&rdquo; (password: welcome1), e iniciar el servidor:</p>

<p><img src="images/2014-12-11-run-bpm-12c-aws/2014-12-11_0930.png" alt="Start server" title="Stating WebLogic Server" /></p>

<p><img src="raw/gh-pages/images/2014-12-11-run-bpm-12c-aws/2014-12-11_0931.png" alt="Server started" title="WebLogic Server with BPM started" /></p>

<p>Eso es todo :).</p>
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'jeqoblog';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
        <div class="navbar">
        <ul class="navbar-list" style="...">
            
            <li class="navbar-item"><a class="navbar-link" href="https://github.com/jeqo">GitHub</a></li>
            
            <li class="navbar-item"><a class="navbar-link" href="https://twitter.com/jeqo89">Twitter</a></li>
            
            <li class="navbar-item"><a class="navbar-link" href="index.xml">RSS</a></li>
            
        </ul>
    </div>
    <div class="copyright">
        <p>&copy; 2018. @jeqo. All rights reserved. </p>
    </div>
    
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-49047812-3', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</div>
</body>
</html>

